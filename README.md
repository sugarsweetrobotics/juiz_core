# juiz - the robot middleware

# Motivation

まず、このソフトウェアを作った動機を書いておく。
このソフトウェアに興味を持った人ならROSの存在は知っていると思う。
ロボットのソフトウェアを作るためのデファクトスタンダードとなっているソフトウェア基盤だ。
私はこのROSについて大きな不満があるわけではない。
もちろん小さな不満はたくさんあって、集めれば大きな不満2つか3つ分にはなるだろうが、些細なことだ。
いまとりあえず実験したい、再診の研究をキャッチアップしたい、などのプロトタイピング目的でROSを使うのは賛成する。
一方で、ROSはバージョン2においても、古典的かつ曖昧なプログラミングモデルを引き続き許しており、引き続きROSを使うことは、継続的に発展するソフトウェア開発を行う場合はリスクが伴う。
大きなリスクとして、モジュールの大きさについて明確な定義や指針がないまま、ソフトウェアの状態をカプセル化している点である。
ROSに限らず、状態をカプセル化するソフトウェアモジュールは継続的発展を経ると肥大化する傾向があり、より多くの状態を包含して複雑化する。
これを避けるためにSOLIDなどの開発指針を厳格に導入することが重要であるが、ロボットに関わる開発エンジニアチームのソフトウェアリテラシーを高く維持するのは難しい。

一方でウェブなど比較してソフトウェアの新陳代謝が活発な世界では、コンポーネントの可搬性はそのままに、内包する状態を集中管理するためのインフラ整備や、状態を積極的に交換するための共通APIを用意することが一般的になっている。
たとえば、ウェブフロントエンドでスタンダードの1つとなっているフレームワークのReactを例に挙げてみる。
Reactはキャンバスやボタン、テキストフィールドなどのHTML部品と、その動作を司るJavascriptないしはTypescriptのコードを一つのコンポーネントとしてまとめ、このコンポーネントを組み合わせてまた大きなコンポーネントや、ウェブページを構成するソフトウェアフレームワークである。
Reactでは内部状態をstateという変数を介してコンポーネント内部の状態の読み書きや自動更新を管理しているが、しばしばこの状態を上位のコンポーネントや、隣り合うコンポーネントとやり取りするために多くのコードを書く必要があった。
これに対して、複数の状態管理フレームワークが提案されている。
たとえば、Redux