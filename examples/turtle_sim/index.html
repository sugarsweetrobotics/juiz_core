<head>
    <title>Turtle Simulator</title>
    <link rel="stylesheet" type="text/css" href="static/css/turtle_sim.css" />
</head>
<body>
    <canvas width="600px" height="600px" id="content_canvas"></canvas>
    <canvas width="600px" height="600px" id="velocity_controller_canvas"></canvas>
    <script src="juiz_js/juiz.js" type="text/javascript"></script>
    <script src="static/js/velocity_controller.js" type="text/javascript"></script>
    <script src="static/js/turtle_sim.js" type="text/javascript"></script>
    <script>

var loop_interval_ms = 300;
var turtleSim = new TurtleSim();
var velController = new CanvasVelocityController(document.getElementById('velocity_controller_canvas'), 5.0, 1.5);
var drawer = new TurtleSimDrawer(document.getElementById('content_canvas'), 10.0, 10.0);
window.addEventListener("load", (event) => {
    turtleSim.setup();
    velController.setup();
    setInterval(async ()=>{
        if (turtleSim.loop()) {
            drawer.draw(turtleSim);
        }
        if (turtleSim.turtles.length > 0) {
            let turtle = turtleSim.turtles[0];
            const value = velController.update();
            const velocity = new Velocity(value[0], 0.0, value[1]);
            await turtle.set_target_velocity(velocity);
        }
    }, loop_interval_ms)
});
    </script>

</body>